function selectSearch(){$(function(){$(".select_filter").length>0&&$(".select_filter").select2({dropdownParent:$(".index_page>main"),width:"resolve",placeholder:{id:"-1"},theme:"classic"})})}if(($(function(){if($(".all_absences #index_table").length>0){var e,t,a,n,o,i,s,l,r,c,d,p,u,m;(new Date).getFullYear();function h(){$(".action_confirm.btn-delete").on("click",function(e){if(!confirm("Sigurno želiš obrisati zahtjev?"))return!1;e.preventDefault(),c=$("#filter_approve").val(),u=$("#filter_types").val(),t=$("#filter_years").val(),employee_id=$("#filter_employees").val(),url_delete=$(this).attr("href"),p=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,token=$(this).attr("data-token"),$.ajaxSetup({headers:{_token:token}}),$.ajax({url:url_delete,type:"POST",data:{_method:"delete",_token:token},beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$("tbody ").load(p+" tbody>tr",function(){$("#loader").remove(),h(),$("#filter_types").find('option[value="'+u+'"]').attr("selected",!0),$("#filter_employees").find('option[value="'+employee_id+'"]').attr("selected",!0),$("#filter_years").find('option[value="'+t+'"]').attr("selected",!0),$("#filter_approve").find('option[value="'+c+'"]').attr("selected",!0)})}})})}$(".all_absences").length>0&&($.fn.DataTable.isDataTable(".all_absences #index_table")||function(){jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-eu-pre":function(o){if(!(o=o.replace(" ","")))return 0;a=o.split(/[\.\-\/]/),e=a[2]?a[2]:0,t=a[1];try{return 1==t.length&&(t=0+t),1==(n=a[0]).length&&(n=0+n),1*(e+t+n)}catch(e){target=null}},"date-eu-asc":function(e,t){return e<t?-1:e>t?1:0},"date-eu-desc":function(e,t){return e<t?1:e>t?-1:0}}),o=$("#user_admin").text(),$(".all_absences.table_absences.table_requests").length>0?(order=[2,"desc"],targets=[2,3]):$(".all_absences.table_absences").length>0?(order=[0,"asc"],targets=[]):"true"==o?(order=[2,"desc"],targets=[2,3]):(order=[2,"desc"],targets=[1,2]);try{$(".all_absences #index_table").DataTable({order:[order],fixedHeader:!0,searching:!1,columnDefs:[{targets:targets,type:"date-eu"}],dom:"Bfrtip",paging:!1,buttons:["copyHtml5",{extend:"print",customize:function(e){$(e.document.body).find("h1").addClass("title_print"),$(e.document.body).find("table").addClass("table_print"),$(e.document.body).find("table tr td").addClass("row_print"),$(e.document.body).addClass("body_print"),$(e.document.body).find("table tr th").addClass("hrow_print"),$(e.document.body).find("table tr th:last-child").addClass("not_print"),$(e.document.body).find("table tr td:last-child").addClass("not_print")}},{extend:"pdfHtml5",orientation:"landscape",pageSize:"A4",exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"}},{extend:"excelHtml5",autoFilter:!0,exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"},customize:function(e){r=e.xl.worksheets["sheet1.xml"],$("row:first c",r).attr("s","27")}}]})}catch(e){console.log(e.message)}}(),h()),$("#year_vacation").on("change",function(){e=$(this).val(),employee_id=$("#filter_employees").val(),$(".info_abs>p>.go").hide(),$(".info_abs>p>.go.go_"+e).show(),$("#mySearchTbl").val(""),i=location.href+"?year="+e+"&employee_id="+employee_id,$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:i,type:"GET",success:function(e){$("table").load(i+" table",function(){h()})},error:function(e,t,a){s={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line},$.ajax({url:"errorMessage",type:"get",data:s,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),$("#year_sick").on("change",function(){e=$(this).val(),$(".info_abs>p>.bol").hide(),$(".info_abs>p>.bol.bol_"+e).show(),i=location.href+"?year="+e+"&type_bol=BOL",$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:i,type:"GET",success:function(e){$("table").load(i+" table",function(){h()})},error:function(e,t,a){s={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line},$.ajax({url:"errorMessage",type:"get",data:s,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),$("#request_type").on("change",function(){"IZL"==$(this).val()?($(".form-group.time").show(),$(".form-group.date2").hide(),l=$("#start_date").val(),$("#end_date").val(l)):($(".form-group.time").hide(),$(".form-group.date2").show())}),$("#start_date").on("change",function(){l=$(this).val(),$("#end_date").val(l)}),$("#filter_employees").on("click",function(){$(this).val("")}),$("#filter_employees").on("change",function(){if($("datalist#list_employees").length>0){var e=$(this).val();employee_id=$("#list_employees").find("[value='"+e+"']").attr("data-id")}else $("select#filter_employees").length>0&&(employee_id=$(this).val());null==employee_id&&employee_id,$("#filter_types").length>0?(u=$("#filter_types").val(),m=$("#filter_types").find("option:selected").text()):u="all",t=$("#filter_years").length>0?$("#filter_years").val():null,c=$("#filter_approve").length>0?$("#filter_approve").val():null,i=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,console.log(i),console.log,$.ajax({url:i,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".main_absence ").load(i+" .main_absence>section",function(){$("#loader").remove(),"Prekovremeni sati"==m||"Izlazak"==m?($(".table-responsive .table thead th.absence_end_date").css("display","none"),$(".table-responsive .table tbody td.absence_end_date").css("display","none"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):""==m?($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","none"),$(".table-responsive .table tbody td.absence_time").css("display","none")),$.getScript("/../js/absence.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),selectSearch(),$(this).find('option[value="'+employee_id+'"]').attr("selected",!0),$("#filter_types").find('option[value="'+u+'"]').attr("selected",!0),$("#filter_years").find('option[value="'+t+'"]').attr("selected",!0),$("#filter_approve").find('option[value="'+c+'"]').attr("selected",!0),_()})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$("#filter_types").on("change",function(){u=$(this).val(),m=$(this).find("option:selected").text(),t=$("#filter_years").length>0?$("#filter_years").val():null,$("#filter_employees").length>0?employee_id=$("#filter_employees").val():employee_id=null,c=$("#filter_approve").length>0?$("#filter_approve").val():null,i=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,$.ajax({url:i,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".main_absence ").load(i+" .main_absence>section",function(){$("#loader").remove(),"Prekovremeni sati"==m||"Izlazak"==m?($(".table-responsive .table thead th.absence_end_date").css("display","none"),$(".table-responsive .table tbody td.absence_end_date").css("display","none"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):""==m?($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","none"),$(".table-responsive .table tbody td.absence_time").css("display","none")),_(),$.getScript("/../js/absence.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),selectSearch(),$(".show_button").on("click",function(){$(".dt-buttons").show()}),$(this).find('option[value="'+u+'"]').attr("selected",!0),$("#filter_employees").find('option[value="'+employee_id+'"]').attr("selected",!0),$("#filter_years").find('option[value="'+t+'"]').attr("selected",!0),$("#filter_approve").find('option[value="'+c+'"]').attr("selected",!0)})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$("#filter_years").on("change",function(){t=$(this).val(),$("#filter_types").length>0?(u=$("#filter_types").val(),m=$("#filter_types").find("option:selected").text()):u="all",$("#filter_employees").length>0?employee_id=$("#filter_employees").val():employee_id=null,c=$("#filter_approve").length>0?$("#filter_approve").val():null,i=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,$.ajax({url:i,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".main_absence ").load(i+" .main_absence>section",function(){$("#loader").remove(),"Prekovremeni sati"==m||"Izlazak"==m?($(".table-responsive .table thead th.absence_end_date").css("display","none"),$(".table-responsive .table tbody td.absence_end_date").css("display","none"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):""==m?($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","none"),$(".table-responsive .table tbody td.absence_time").css("display","none")),$.getScript("/../js/absence.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),selectSearch(),$("#filter_employees").find('option[value="'+employee_id+'"]').attr("selected",!0),$("#filter_types").find('option[value="'+u+'"]').attr("selected",!0),$(this).find('option[value="'+t+'"]').attr("selected",!0),$("#filter_approve").find('option[value="'+c+'"]').attr("selected",!0),_()})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$("#filter_approve").on("change",function(){c=$(this).val(),u=$("#filter_types").val(),m=$("#filter_types").find("option:selected").text(),t=$("#filter_years").val(),employee_id=$("#filter_employees").val(),i=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,$.ajax({url:i,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".main_absence ").load(i+" .main_absence>section",function(){$("#loader").remove(),"Prekovremeni sati"==m||"Izlazak"==m?($(".table-responsive .table thead th.absence_end_date").css("display","none"),$(".table-responsive .table tbody td.absence_end_date").css("display","none"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):""==m?($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","table-cell"),$(".table-responsive .table tbody td.absence_time").css("display","table-cell")):($(".table-responsive .table thead th.absence_end_date").css("display","table-cell"),$(".table-responsive .table tbody td.absence_end_date").css("display","table-cell"),$(".table-responsive .table thead th.absence_time").css("display","none"),$(".table-responsive .table tbody td.absence_time").css("display","none")),$.getScript("/../js/absence.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),selectSearch(),$("#filter_employees").find('option[value="'+employee_id+'"]').attr("selected",!0),$("#filter_types").find('option[value="'+u+'"]').attr("selected",!0),$("#filter_years").find('option[value="'+t+'"]').attr("selected",!0),$(this).find('option[value="'+c+'"]').attr("selected",!0),_()})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".all_absences #index_table_filter").show(),0==$(".all_absences #index_table_filter .show_button").length&&($(".all_absences #index_table_filter .filter_area").append('<span class="show_button"><i class="fas fa-download"></i></span>'),$(".show_button").on("click",function(){$(".dt-buttons").toggle()})),$("span#checkall").on("click",function(){$(".check.checkinput").prop("checked",!0),$(".uncheck.checkinput").prop("checked",!1)}),$("span#uncheckall").on("click",function(){$(".check.checkinput").prop("checked",!1),$(".uncheck.checkinput").prop("checked",!0)}),$("span#nocheckall").on("click",function(){$(".check.checkinput").prop("checked",!1),$(".uncheck.checkinput").prop("checked",!1),$(".nocheck.checkinput").prop("checked",!1)}),$(".after_form").on("submit",function(e){var a=$(".checkinput:checked").length;if(!confirm("Sigurno želiš odobriti "+a+" zahtjeva?"))return!1;e.preventDefault(),i=$(this).attr("action"),d=$(this).serialize(),c=$("#filter_approve").val(),u=$("#filter_types").val(),t=$("#filter_years").val(),employee_id=$("#filter_employees").val(),p=location.href+"?month="+t+"&type="+u+"&employee_id="+employee_id+"&approve="+c,console.log(i),console.log(d),$.ajax({url:i,type:"post",data:d,beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$("tbody").load(p+" tbody>tr",function(){$("#loader").remove(),alert(e)})},error:function(e,t,a){console.log("validate eror "+e+"\n"+t+"\n"+a)}})}),$("tr.tr_open_link td:not(.not_link)").on("click",function(e){e.preventDefault(),i=location.origin+$(this).parent().attr("data-href"),console.log(i),window.location=i}),selectSearch()}function _(){console.log(employee_id)}}),$(function(){var e,t,a,n,o,i,s,l,r,c,d,p=new Date,u=p.getFullYear()+"-"+("0"+(p.getMonth()+1)).slice(-2)+"-"+("0"+p.getDate()).slice(-2);function m(e,t){url=location.origin+"/getProject",console.log(url),$.ajax({url:url,type:"get",data:{employee_id:e,start_date:t},success:function(a){console.log(a),console.log(Object.keys(a)[0]),$.map(a,function(e,t){return t}).length>0&&function(e){var t='<option value="" disabled selected>Izaberi projekt</option>';$.each(e,function(e,a){t+='<option class="project_list" name="erp_task_id" value="'+e+'">'+a+"</option>"}),$("#select_project option").remove(),$("#select_project").length>0&&$("#select_project").prepend(t)}(a),h(e,t,Object.keys(a)[0])},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}})}function h(e,t,a){url=location.origin+"/getTasks",console.log(url),$.ajax({url:url,type:"get",data:{employee_id:e,start_date:t,project:a},success:function(e){console.log(e),$.map(e,function(e,t){return t}).length>0?function(e){var t='<option value="" disabled selected>Izaberi zadatak</option>';$.each(e,function(e,a){t+='<option class="project_list" name="erp_task_id" value="'+e+'">'+a+"</option>"}),t+="</select></div>",$("#select_task option").remove(),$("#select_task").length>0&&$("#select_task").prepend(t)}(e):$(".tasks select option").not(".disabled").remove()},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}})}$(".btn-submit").on("click",function(){$(this).hide()}),$("input").on("change",function(){$(".btn-submit").show()}),$("select").on("change",function(){$(".btn-submit").show()}),$("textarea").on("change",function(){$(".btn-submit").show()}),$(".show_button").on("click",function(){$(".dt-buttons").show()}),$("form.absence").length>0&&($("#request_type").on("change",function(){$("input[name=start_date]").prop("disabled",!1),$("input[name=start_date]").prop("hidden",!1),$("input[name=end_date]").prop("disabled",!1),$("input[name=end_date]").prop("hidden",!1),t=$(this).val(),e=$("#select_employee").val(),"IZL"==t||63==t?(a=$("#start_date").val(),(n=$("#end_date")).val(a),p.setDate(p.getDate()-1),r=p.getFullYear()+"-"+("0"+(p.getMonth()+1)).slice(-2)+"-"+("0"+p.getDate()).slice(-2),$("#start_date").attr("min",r),$("#start_date").val(u),$(".form-group.time_group").show(),$(".form-group.date2").hide(),$("input[name=end_time]").on("blur",function(){s=$("input[name=start_time]").val(),l=$("input[name=end_time]").val(),(new Date("1970-1-1 "+l)-new Date("1970-1-1 "+s))/1e3/60/60<0?($(".time_request").show(),$(".btn-submit").hide()):($(".time_request").hide(),$(".btn-submit").show())})):($(".form-group.time_group").hide(),$(".form-group.date2").show(),$("#start_date").removeAttr("min"),$(".tasks").remove()),"GO"==t||"holiday"==t?""!=e&&null!=e&&getDays(e):($(".days_employee").text(""),$(".days_employee").hide(),$(".btn-submit").show()),"BOL"==t||2==t||"IZL"==t||63==t?($(".datum.date2").hide(),"BOL"==t||2==t?($("#end_date").val(null),$("#end_date").prop("required",!1)):$("#end_date").prop("required",!0)):$(".datum.date2").show(),"SLD"!=t&&66!=t||(e=$("#select_employee").val(),url=location.origin+"/days_offUnused/"+e,$.ajax({url:url,type:"get",success:function(e){0==(c=e)?($(".days_employee").text("Nemoguće poslati zahtjev. Svi slobodni dani su iskorišteni!"),$(".btn-submit").hide()):($(".days_employee").text("Neiskorišteno "+c+" slobodnih dana"),$(".btn-submit").show()),$(".days_employee").show()},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}}))}),$("#select_employee").on("change",function(){e=$(this).val(),t=$("#request_type").val(),""==e||null==e||"GO"!=t&&"holiday"!=t||getDays(e)}),$("#start_date").on("change",function(){a=$(this).val(),n=$("#end_date"),"BOL"==t||2==t?n.val(null):n.val(a),o=new Date(a),"Invalid Date"!=(i=new Date(n))&&i<o&&($(".days_request").text("Nemoguće poslati zahtjev. Završni datum ne može biti prije početnog"),$(".days_request").show()),e=$("#select_employee").val()}),$("#end_date").on("change",function(){a=$("#start_date").val(),n=$(this).val(),o=new Date(a),"Invalid Date"!=(i=new Date(n))&&i<o?($(".days_request").text("Nemoguće poslati zahtjev. Završni datum ne može biti prije početnog"),$(".days_request").show(),$(".btn-submit").hide()):($(".days_request").text(""),$(".days_request>span").text(""),$(".days_request").hide(),$(".btn-submit").show(),""==a&&$("#start_date").val(n),t=$("#request_type").val(),""==(e=$("#select_employee").val())||"GO"!=t&&"holiday"!=t||(url=location.origin+"/daniGO",$.ajax({url:url,type:"get",data:{start_date:a,end_date:n},success:function(e){d=$("#user_role").text(),c-e<0&&"admin"!=d?($(".days_request").text("Nemoguće poslati zahtjev. Broj dana zahtjeva je veći od broja neiskorištenih dana za"),$(".days_request>span").text(c-e),$(".days_request").show(),$(".btn-submit").hide()):($(".days_request>span").text(""),$(".days_request").hide(),$(".btn-submit").show())},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}})))})),($("form.form_afterhour").length>0||$("form.form_work_diary").length>0)&&($("#select_employee").on("change",function(){e=$("#select_employee").val(),a=$("#date").val(),console.log("employee_id "+e),console.log("start_date "+a),m(e,a)}),$("#select_project").on("change",function(){e=$("#select_employee").val(),a=$("#date").val(),project=$(this).val(),console.log(url),console.log("employee_id "+e),console.log("project "+project),console.log("start_date "+a),h(e,a,project)}),$("#date").on("change",function(){e=$("#select_employee").val(),a=$("#date").val(),""!=e&&null!=e&&m(e,a)}))}),$(".main_ads").length>0)&&($(".select_filter.sort").on("change",function(){$("main.main_ads").load($(this).val()+" main.main_ads article")}),(body_width=$("body").width())>450)){var all_height=[];$(".noticeboard_notice_body.panel .ad_content").each(function(){all_height.push($(this).height())}),all_height.sort(function(e,t){return t-e});var max_height=all_height[0];$(".noticeboard_notice_body.panel .ad_content").height(max_height)}$(".benefit_body").first().show(),$(".benefit_title").on("click",function(){$(".benefit_title").removeClass("active");var e=$(this).attr("id");console.log(e),$(".benefit_body").hide(),$(".benefit_body#_"+e).show(),$(this).addClass("active")});var main_benefits_height=$(".main_benefits").height(),main_benefits_head_height=$(".main_benefits_head").height()+40,benefits_scroll=$(".benefits_scroll").height(),body_width=$("body").width(),div_width=$(".main_benefits_head").width(),all_width=0;$(".benefit_title").first().addClass("active"),body_width>450?($(".main_benefits_body").height(main_benefits_height-main_benefits_head_height-benefits_scroll),$(".main_benefits_head > .benefit_title").each((e,t)=>{all_width+=203}),all_width-30>div_width+1&&$(".main_benefits .scroll_right").show()):($(".main_benefits_head > .benefit_title").each((e,t)=>{all_width+=110}),all_width-10>div_width+1&&$(".main_benefits .scroll_right").show()),$("#right-button").on("click",function(e){e.preventDefault(),$(".main_benefits_head").animate({scrollLeft:"+=203px"},"slow"),$(".main_benefits .scroll_left").show()}),$("#left-button").on("click",function(e){e.preventDefault(),$(".main_benefits_head").animate({scrollLeft:"-=203px"},"slow"),$(".main_benefits_head").scrollLeft()<203?$(".main_benefits .scroll_left").hide():$(".main_benefits .scroll_left").show()}),$(window).on("resize",function(){$(".main_benefits_head > .benefit_title").each((e,t)=>{all_width+=203}),all_width-30>div_width+1?$(".main_benefits .scroll_right").show():$(".main_benefits .scroll_right").hide()}),$(function(){$(".dates li").first().addClass("active_date");var e=$(".dates").width(),t=69,a=$(".box-content").find(".dates"),n=new Array("SUN","MON","TUE","WED","THU","FRI","SAT"),o=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),s=new Date,l=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),r=e/t;for(a.append('<li id="li-'+l+'" class="active_date"><span class="month">'+o[s.getMonth()]+'</span><span class="day">'+s.getDate()+'</span><span class="week_day">'+n[s.getDay()]+'</span><span class="display_none YYYY_mm">'+s.getFullYear()+"-"+ +("0"+(s.getMonth()+1)).slice(-2)+"</span></li>"),i=0;i<r-1;i++){var c=new Date(s.setDate(s.getDate()+1)),d=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);a.append('<li id="li-'+d+'" class=""><span class="month">'+o[c.getMonth()]+'</span><span class="day">'+c.getDate()+'</span><span class="week_day">'+n[c.getDay()]+'</span><span class="display_none YYYY_mm">'+s.getFullYear()+"-"+ +("0"+(s.getMonth()+1)).slice(-2)+"</span></li>")}function p(){if($("body").width()>1e3)$("section.calendar>div").height(),$("section.calendar #calendar").height()}if($(window).on("resize",function(){var e=$(".dates").width()/t;for(i=0;i<e;i++){var l=new Date(s.setDate(s.getDate()+1)),r=l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2);a.append('<li id="li-'+r+'" class=""><span class="month">'+o[l.getMonth()]+'</span><span class="day">'+l.getDate()+'</span><span class="week_day">'+n[l.getDay()]+'</span><span class="display_none YYYY_mm">'+s.getFullYear()+"-"+ +("0"+(s.getMonth()+1)).slice(-2)+"</span></li>")}}),$(".dates li").on("click",function(){var e=$(this).attr("id").replace("li-",""),t=$(this).attr("id"),a=location.origin+"/dashboard?active_date="+e;$(".dates>li").removeClass("active_date"),$(this).addClass("active_date"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:a,type:"GET",success:function(e){$(".comming_agenda").load(a+" .comming_agenda>section",function(){if(0==$(".comming_agenda .all_agenda .agenda").length&&$(".comming_agenda .placeholder").show(),t){var e=t.replace("li-","");$(".comming_agenda > .agenda").each((t,a)=>{$(a).addClass("display_none"),$(a).removeClass("show_agenda"),$(a).attr("id")==e&&($(a).removeClass("display_none"),$(a).addClass("show_agenda"))})}if($(".comming_agenda .agenda.show_agenda").length)$(".comming_agenda .placeholder").hide();else{$(".comming_agenda .placeholder").show();var a=$(".placeholder img").height();$(".placeholder_cal >p").css("line-height",a+"px")}})},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),p(),$(".comming_agenda .all_agenda.show_agenda").length)$(".comming_agenda .placeholder").hide();else{$("section.calendar>div").height(),$("section.calendar #calendar").height();$(".comming_agenda .placeholder").show();$(".placeholder img").height()}$("#left-button").on("click",function(){var e=$(".dates").find("li.active_date"),t=$(a).find("li").first(),i=t.find(".day").text(),s=t.find("span.YYYY_mm").text().slice(5,7),l=t.find("span.YYYY_mm").text().slice(0,4),r=new Date(l+"-"+s+"-"+i),c=new Date(r.setDate(r.getDate()-1)),d=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);0==$(".dates").scrollLeft()&&a.prepend('<li id="li-'+d+'" class=""><span class="month">'+o[c.getMonth()]+'</span><span class="day">'+c.getDate()+'</span><span class="week_day">'+n[c.getDay()]+'</span><span class="display_none YYYY_mm">'+r.getFullYear()+"-"+ +("0"+(r.getMonth()+1)).slice(-2)+"</span></li>"),$(".dates").animate({scrollLeft:"-=69"},"slow");var u=e.prev();u.addClass("active_date"),e.removeClass("active_date"),u.trigger("click"),p(),$.getScript("/../js/event_click.js")}),$("#right-button").on("click",function(){var i=$(".dates").find("li.active_date"),s=$(a).find("li").last(),l=s.find(".day").text(),r=s.find("span.YYYY_mm").text().slice(5,7),c=s.find("span.YYYY_mm").text().slice(0,4),d=new Date(c+"-"+r+"-"+l),u=new Date(d.setDate(d.getDate()+1)),m=u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2);$(".dates").animate({scrollLeft:"+=69"},"slow");var h=0;$(".dates > li").each(function(e,a){t+=69,h++}),69*h-(e+69)<$(".dates").scrollLeft()&&a.append('<li id="li-'+m+'" class=""><span class="month">'+o[u.getMonth()]+'</span><span class="day">'+u.getDate()+'</span><span class="week_day">'+n[u.getDay()]+'</span><span class="display_none YYYY_mm">'+u.getFullYear()+"-"+ +("0"+(u.getMonth()+1)).slice(-2)+"</span></li>");var _=i.next();_.addClass("active_date"),i.removeClass("active_date"),_.trigger("click"),p(),$.getScript("/../js/event_click.js")})}),$(".campaign_show").length>0&&$(".campaign_show").on("click",function(e){window.history.replaceState({},document.title,$(this).attr("href")),e.preventDefault();var t=$(this).attr("href");$(".index_main").load(t+" .index_main > section",function(){$.getScript("/../js/jquery-ui.js"),$.getScript("/../js/sequence_dragDrop.js"),$.getScript("/../restfulizer.js"),$(".main_noticeboard .header_document .link_back").on("click",function(e){e.preventDefault();var t=location.origin+"/campaigns";$(".container").load(t+" .container > div",function(){$.getScript("/../js/datatables.js"),$.getScript("/../js/filter_table.js"),$.getScript("/../restfulizer.js"),$.getScript("/../js/event.js"),$.getScript("/../js/campaign.js")}),window.history.pushState(location.href,"Title",t)}),$(".campaign_mail").on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal campaign_mail",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}})})}),$(".period").on("change",function(){"customized"==$(this).val()&&($("#period .period").hide(),$("#period .period").removeAttr("required"),$("#interval").show(),$("input.input_interval").prop("required"))}),$(".label_custom_interal").click(function(){$("#period .period").hide(),$("#period .period").removeAttr("required"),$("#interval").show(),$("input.input_interval").prop("required")}),$(".label_period").on("click",function(){$("#period .period").show(),$("#period .period").prop("required"),$("#interval").hide(),$("input.input_interval").removeAttr("required")});var form_sequence_height=$(".form_sequence").height(),header_campaign_height=$(".header_campaign").height();$("body").width()>760&&$(".main_campaign").height(form_sequence_height-header_campaign_height);var url=$("form.form_sequence").attr("action");try{unlayer.init({appearance:{theme:"light",panels:{tools:{dock:"left"}}},id:"editor-container",projectId:4441,displayMode:"email"}),unlayer.addEventListener("design:updated",function(e){unlayer.exportHtml(function(e){html=e.html,design=e.design})})}catch(error){}$(".form_sequence.create .btn-submit").on("click",function(e){var t=[];e.preventDefault();var a=$(".form_sequence")[0],n=new FormData(a);n.append("text_json",JSON.stringify(design)),n.append("text_html",html),$(".btn-submit").prop("disabled",!0);var o=$(".form_sequence").serializeArray();jQuery.each(o,function(e,a){""==a.value?t.push("block"):t.push(!0)}),null==html||null==JSON.stringify(design)?t.push("block"):t.push(!0),t.includes("block")?(e.preventDefault(),alert("Nisu uneseni svi parametri, nemoguće spremiti sekvencu")):($(".btn-submit").prop("disabled",!1),$.ajax({type:"POST",enctype:"multipart/form-data",url:url,data:n,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){alert("Dizajn je spremljen!"),$(".btn-submit").prop("disabled",!1)},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}}))}),$(function(){$(".nav-link").css("background-color","#F8FAFF !important"),$(".active.nav-link").css("background-color","#1594F0 !important")}),$(".dataArrTemplates").text()&&(dataArrTemplates=JSON.parse($(".dataArrTemplates").text()),$.each(dataArrTemplates,function(e,t){var a=t.title;$("#template-container").append('<span class="template_button blockbuilder-content-tool" id="'+e+'"><div>'+a+"</div></span>")})),$(".template_button").on("click",function(){temp=$(this).attr("id"),designTemplates=JSON.parse(dataArrTemplates[temp].text_json),htmlTemplates=dataArrTemplates[temp].text,unlayer.loadDesign(designTemplates),$(".show_temp#temp"+temp).remove()}),$(".template_button").on("mouseover",function(){temp=$(this).attr("id"),htmlTemplates=dataArrTemplates[temp].text,$("body").append('<span class="show_temp" id="temp'+temp+'">'+htmlTemplates+"</span>"),$(".show_temp#temp"+temp).show()}),$(".template_button").on("mouseout",function(){$(".show_temp#temp"+temp).remove()}),$(".period").on("change",function(){"customized"==$(this).val()&&($("#period .period").hide(),$("#period .period").removeAttr("required"),$("#interval").show(),$("input.input_interval").prop("required"))}),$(".label_custom_interal").click(function(){$("#period .period").hide(),$("#period .period").removeAttr("required"),$("#interval").show(),$("input.input_interval").prop("required")}),$(".label_period").click(function(){$("#period .period").show(),$("#period .period").prop("required"),$("#interval").hide(),$("input.input_interval").removeAttr("required")});form_sequence_height=$(".form_sequence").height(),header_campaign_height=$(".header_campaign").height();$(".main_campaign").height(form_sequence_height-header_campaign_height);try{var design=JSON.parse($(".dataArr").text()),html=$(".dataArrHtml").text(),form_data=$(".form_sequence").serialize(),data_new=(url=$("form.form_sequence").attr("action"),{}),json="",id=(html="",$("#id").val());unlayer.init({appearance:{theme:"light",panels:{tools:{dock:"left"}}},id:"editor-container",projectId:4441,displayMode:"email"}),unlayer.loadDesign(design),unlayer.addEventListener("design:updated",function(e){unlayer.exportHtml(function(e){json=e.design,html=e.html})})}catch(error){}$(".form_sequence.edit .btn-submit").on("click",function(e){var t=[];e.preventDefault(),form_data=$(".form_sequence").serialize(),form_data_array=$(".form_sequence").serializeArray(),data_new=form_data;var a=$(".form_sequence")[0],n=new FormData(a);n.append("text_json",JSON.stringify(design)),n.append("text_html",html),jQuery.each(form_data_array,function(e,a){""==a.value?t.push("block"):t.push(!0)}),console.log(form_data_array),console.log(t),t.includes("block")?(e.preventDefault(),alert("Nisu uneseni svi parametri, nemoguće spremiti sekvencu")):($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"post",enctype:"multipart/form-data",url:url,data:n,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){alert("Dizajn je spremljen!"),console.log("SUCCESS : ",form_data_array),$(".btn-submit").prop("disabled",!1)},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}}))}),$(".btn-back").on("click",function(e){}),$(".dataArrTemplates").text()&&(dataArrTemplates=JSON.parse($(".dataArrTemplates").text()),$.each(dataArrTemplates,function(e,t){var a=dataArrTemplates[e].title;$("#template-container").append('<span class="template_button blockbuilder-content-tool" id="'+e+'"><div>'+a+"</div></span>")})),$(".template_button").on("click",function(){temp=$(this).attr("id"),designTemplates=JSON.parse(dataArrTemplates[temp].text_json),htmlTemplates=dataArrTemplates[temp].text,unlayer.loadDesign(designTemplates),$(".show_temp#temp"+temp).remove()}),$(".template_button").on("mouseover",function(){temp=$(this).attr("id"),htmlTemplates=dataArrTemplates[temp].text,$("body").append('<span class="show_temp" id="temp'+temp+'">'+htmlTemplates+"</span>"),$(".show_temp#temp"+temp).show()}),$(".template_button").on("mouseout",function(){$(".show_temp#temp"+temp).remove()});var ctx=$("#myChart"),dataArr=$(".dataArr").text();try{if(ctx.length>0)var myChart=new Chart(ctx,{type:"doughnut",data:{labels:["Pročitano","Nepročitano"],datasets:[{label:"# of Votes",data:dataArr,backgroundColor:["rgba(21, 148, 240, 1)","rgba(241, 241, 241, 1)"],borderColor:["rgba(21, 148, 240, 1)","rgba(241, 241, 241, 1)"],borderWidth:1}]},options:{legend:{display:!1,labels:{fontColor:"rgb(255, 99, 132)"}},tooltips:{enabled:!1}}})}catch(error){}var ctx1=$("#myChart1");try{if(ctx1.length>0)myChart=new Chart(ctx1,{type:"doughnut",data:{labels:["Pročitano","Nepročitano"],datasets:[{label:"# of Votes",data:[25,75],backgroundColor:["rgba(7, 30, 87, 1)","rgba(241, 241, 241, 1)"],borderColor:["rgba(7, 30, 87, 1)","rgba(241, 241, 241, 1)"],borderWidth:1}]},options:{legend:{display:!1,labels:{fontColor:"rgb(255, 99, 132)"}},tooltips:{enabled:!1}}})}catch(error){}var ctx2=$("#myChart2");try{if(ctx2.length>0)myChart=new Chart(ctx2,{type:"doughnut",data:{labels:["Pročitano","Nepročitano"],datasets:[{label:"# of Votes",data:[25,75],backgroundColor:["rgba(234, 148, 19, 1)","rgba(241, 241, 241, 1)"],borderColor:["rgba(234, 148, 19, 1)","rgba(241, 241, 241, 1)"],borderWidth:1}]},options:{legend:{display:!1,labels:{fontColor:"rgb(255, 99, 132)"}},tooltips:{enabled:!1}}})}catch(error){}var ctx3=$("#myChart3");try{if(ctx3.length>0)myChart=new Chart(ctx3,{type:"doughnut",data:{labels:["Pročitano","Nepročitano"],datasets:[{label:"# of Votes",data:[25,75],backgroundColor:["rgba(19, 234, 144, 1)","rgba(241, 241, 241, 1)"],borderColor:["rgba(19, 234, 144, 1)","rgba(241, 241, 241, 1)"],borderWidth:1}]},options:{legend:{display:!1,labels:{fontColor:"rgb(255, 99, 132)"}},tooltips:{enabled:!1}}})}catch(error){}if($(function(){$(".collapsible").on("click",function(e){console.log("collapsible"),$(this).siblings().is(":visible")?$(this).siblings().css("display","none"):$(this).siblings().css("display","block")}),$(".index_page table.dataTable .content").on("mouseleave",function(){$(this).hide()}),$(".modal.modal_questionnaire .question .content").on("mouseleave",function(){$(this).hide()}),$(".modal.modal_questionnaire .category .content").on("mouseleave",function(){$(this).hide()})}),$(function(){if($("table.display").not(".evidention_employee table.display").not(".all_absences #index_table").length>0){if(location.href.includes("loccos/"))var e="H";var t=0,a="asc";$("#index_table").hasClass("sort_1_asc")&&(t=1,a="asc"),$("#index_table").hasClass("sort_0_desc")&&(t=0,a="desc"),$("#index_table").hasClass("sort_1_asc")&&(t=1,a="asc"),$("#index_table").hasClass("sort_2_desc")&&(t=2,a="desc"),$("#index_table").hasClass("sort_3_desc")&&(t=3,a="desc");var n=$("table.display thead th").not(".not-export-column"),o=[];$(n).each(function(e){$(this).hasClass("sort_date")&&o.push(e)});try{jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-eu-pre":function(e){if(!(e=e.replace(" ","")))return 0;var t,a=e.split(/[\.\-\/]/);t=a[2]?a[2]:0;var n=a[1];null!=n&&1==n.length&&(n=0+n);var o=a[0];return 1==o.length&&(o=0+o),1*(t+n+o)},"date-eu-asc":function(e,t){return e<t?-1:e>t?1:0},"date-eu-desc":function(e,t){return e<t?1:e>t?-1:0}})}catch(e){}if($("table.display").length>0){var s=$("table.display").not(".evidention_employee table.display",".all_absences #index_table").DataTable({language:{search:"",searchPlaceholder:"Search"},lengthMenu:[10,25,50,75,100],pageLength:50,paging:!1,searching:!0,ordering:!0,order:[t,a],info:!0,bDestroy:!0,lengthChange:!0,fixedHeader:!1,colReorder:!0,columnDefs:[{targets:o,type:"date-eu"}],stateSave:!0,dom:"Bfrtip",buttons:[{extend:"pdfHtml5",orientation:"landscape",pageSize:"A4",download:"open",exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"},customize:function(e){e.defaultStyle.fontSize=8;s.columns(":not(.not-export-column)").count();e.styles.tableHeader={color:"black",background:"grey",alignment:"center"},e.footer=function(e,t){return{columns:["Broj strana",{alignment:"right",text:[{text:e.toString(),italics:!0}," of ",{text:t.toString(),italics:!0}]}],margin:[30,10]}},e.styles={table:{fontSize:8},subheader:{fontSize:8,bold:!0,color:"black"},tableHeader:{bold:!0,fontSize:8,color:"black"},lastLine:{bold:!0,fontSize:8,color:"blue"},defaultStyle:{fontSize:8,color:"black"}};var t={hLineWidth:function(e){return.8},vLineWidth:function(e){return.5},hLineColor:function(e){return"#aaa"},vLineColor:function(e){return"#aaa"}};e.content[1].layout=t}},{extend:"excelHtml5",autoFilter:!0,exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"},customize:function(t){var a=t.xl.worksheets["sheet1.xml"];$("row:first c",a).attr("s","2");var n=a.createElement("pageSetup");a.childNodes[0].appendChild(n);var o=a.getElementsByTagName("pageSetup")[0];o.setAttribute("paperSize","8"),o.setAttribute("orientation","landscape"),o.setAttribute("r:id","rId1");var s=t.xl["styles.xml"].getElementsByTagName("sz");for(i=0;i<s.length;i++)s[i].setAttribute("val","9");$("row c",a).each(function(){$(this).attr("s","25")});$("col",a);$('row c[r^="'+e+'"]',a).each(function(){$("is t",this).text()&&$(this).attr("s",["55"])})}}]});0==$(".index_table_filter .show_button").length&&$(".index_table_filter").append('<span class="show_button"><i class="fas fa-download"></i></span>'),$(".show_button").on("click",function(){$(".dt-buttons").show()})}$("table.display").show()}}),$(function(){if($(".evidention_employee").length>0){if(!$.fn.DataTable.isDataTable(".evidention_employee table.display"))$(".evidention_employee table.display").DataTable({language:{search:"",searchPlaceholder:"Search"},pageLength:50,paging:!1,searching:!1,ordering:!1,order:[],info:!0,bDestroy:!1,lengthChange:!0,fixedHeader:!0,colReorder:!0,responsive:!0,columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],stateSave:!0,dom:"Bfrtip",buttons:[{extend:"pdfHtml5",orientation:"landscape",footer:!0,pageSize:"A3",defaultStyle:{fontSize:6,color:"black"},exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"},customize:function(e){console.log(e),e.styles.tableHeader={color:"black",background:"grey",alignment:"center"},e.defaultStyle={fontSize:8},e.styles={subheader:{fontSize:10,bold:!0,color:"black"},tableHeader:{bold:!0,fontSize:8,color:"black"},lastLine:{bold:!0,fontSize:8,color:"blue"},defaultStyle:{fontSize:8,color:"black"}};var t=e.content[1].table.body.length;for(i=1;i<t;i++){var a,n=e.content[1].table.body[i].length;for(j=1;j<n;j++)a=0==j||j==n-1?"right":1==j?"left":"center",e.content[1].table.body[i][j].alignment=a,3!=i&&8!=i&&15!=i&&17!=i||(e.content[1].table.body[i][j].fillColor="lightgrey"),24==i&&(e.content[1].table.body[i][j].bold=!0,e.content[1].table.body[i][j].fontSize=10,e.content[1].table.body[i][j].fillColor="lightgrey")}var o={hLineWidth:function(e){return.8},vLineWidth:function(e){return.5},hLineColor:function(e){return"#aaa"},vLineColor:function(e){return"#aaa"}};e.content[1].layout=o}},{extend:"excelHtml5",footer:!0,autoFilter:!1,createEmptyCells:!0,orientation:"landscape",pageSize:"A2",exportOptions:{columns:"th:not(.not-export-column)",rows:":visible"},customize:function(e){var t=e.xl.worksheets["sheet1.xml"];$("row:first c",t).attr("s","2");var a=t.createElement("pageSetup");t.childNodes[0].appendChild(a);var n=t.getElementsByTagName("pageSetup")[0];n.setAttribute("paperSize","8"),n.setAttribute("orientation","landscape"),n.setAttribute("r:id","rId1"),$("row c",t).each(function(){$(this).attr("s","25")});var o=$("col",t);$(o[1]).attr("width",50),$('row c[r^="B"]',t).each(function(){$("is t",this).text()&&$(this).attr("s","55")});var s=(t=e.xl["styles.xml"]).getElementsByTagName("sz");for(i=0;i<s.length;i++)s[i].setAttribute("val","8")}}]});0==$(".index_table_filter .show_button").length&&$(".index_table_filter").append('<span class="show_button"><i class="fas fa-download"></i></span>'),$(".evidention_employee .show_button").on("click",function(){$(".evidention_employee .dt-buttons").toggle()}),$("table.display").show()}}),$(function(){if($(".index_page.index_documents").length>0){$("body").width();var e=$(".preview_doc").width(),t=115;$(".preview_doc > .thumbnail").each((e,a)=>{t+=115}),t>e&&$(".preview_doc .scroll_right").show(),$("#right-button").on("click",function(e){e.preventDefault(),$(".preview_doc").animate({scrollLeft:"+=115px"},"slow"),$(".preview_doc .scroll_left").show()}),$(".thumbnail").each(function(){$(this).attr("title")}),$("#left-button").on("click",function(e){e.preventDefault(),$(".preview_doc").animate({scrollLeft:"-=115px"},"slow"),$(".preview_doc").scrollLeft()<115?$(".preview_doc .scroll_left").hide():$(".preview_doc .scroll_left").show()});$(".all_documents").height(),$(".dataTables_filter").height();var a,n=$(".index_main.main_documents").height(),o=$(".page-header.header_document").height();$(".show").on("click",function(){$(".show").toggle(),$(".hide").toggle(),$(".preview_doc").show(),n=$(".index_main.main_documents").height(),o=$(".page-header.header_document").height(),a=n-o-60,$(".all_documents").height(a)}),$(".hide").on("click",function(){$(".show").toggle(),$(".hide").toggle(),$(".preview_doc").hide(),n=$(".index_main.main_documents").height(),o=$(".page-header.header_document").height(),a=n-o-60,$(".all_documents").height(a)}),$(".button_nav").css({}),$(".doc_button").css({}),$(function(){$("#index_table").css("height","fit-content")})}}),$(".efc_show").on("click",function(){$(".salery_hidden").hide(),$(".salery_show").toggle(),$(".salery_show").css("display","block"),$(".efc_show").hide(),$(".efc_hide").show()}),$(".efc_hide").on("click",function(){$(".salery_hidden").toggle(),$(".salery_hidden").css("display","block"),$(".salery_show").toggle(),$(".efc_show").show(),$(".efc_hide").hide()}),$(".energy_consumptions").length>0){var location_id,energy_id,counter=null;function countSource(e,t){url=location.origin+"/lastCounter/"+e+"/"+t,console.log(url),$.ajax({url:url,type:"get",success:function(e){null!=(e=e)&&$(".last_counter span").text(e)},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}})}function countSource_last(e,t){url=location.origin+"/lastCounter_Skip/"+e+"/"+t,console.log(url),$.ajax({url:url,type:"get",success:function(e){null!=(e=e)&&($(".last_counter span").text(e),$("#result").text($("input[name=counter").val()-e))},error:function(e,t,a){console.log(e),console.log(t),console.log(a)}})}$("select[name=location_id]").on("change",function(){location_id=$(this).val(),energy_id=$("select[name=energy_id]").val(),null!=location_id&&null!=energy_id&&(console.log(location_id),console.log(energy_id),countSource(location_id,energy_id))}),$("select[name=energy_id]").on("change",function(){energy_id=$(this).val(),null!=(location_id=$("select[name=location_id]").val())&&null!=energy_id&&(console.log(location_id),console.log(energy_id),countSource(location_id,energy_id))}),$("input[name=counter]").on("keyup",function(){counter=$(this).val(),last_counter=$(".last_counter span").text(),console.log(counter),console.log(last_counter),counter&&last_counter&&($("#result").text(counter-last_counter),counter-last_counter<0?$("#result").css("color","red"):$("#result").css("color","inherit"))}),$(".energy_consumptions.edit").length>0&&(location_id=$("select[name=location_id]").val(),energy_id=$("select[name=energy_id]").val(),countSource_last(location_id,energy_id))}$(function(){var e,t,a,n=location.origin+"/events";$("body").width();if($(".dataArr").text())var o=JSON.parse($(".dataArr").text());function i(e,t){$.get(e,{dan:t},function(e,t){var n=$(".day_events>div",e).get(0).outerHTML;$(".day_events").html(n),$(".index_aside .day_events").show();var o=$(".index_event>section",e).get(0).outerHTML;$(".index_event").html(o),$(".main_calendar_month tbody td").on("click",function(){var e=$(this).attr("data-date");$(".pignose-calendar-body").find('[data-date="'+e+'"] > a').trigger("click")}),$(".change_employee").on("change",function(){var e=$(this).val().toLowerCase();$(".show_event").filter(function(){$(this).toggle($(this).hasClass(e))}),$(".month_event").filter(function(){$(this).toggle($(this).hasClass(e))}),""==e&&($(".show_event").show(),$(".month_event").show())}),$(".change_car").on("change",function(){var e=$(this).val().toLowerCase();$(".show_locco").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)}),""==e&&$(".show_locco").show()}),$(".change_view_calendar").on("change",function(){if("day"==(a=$(this).val())){$(".main_calendar_day").show(),$(".main_calendar_week").hide(),$(".main_calendar_month").hide(),$(".main_calendar_list").hide(),$("button.show_locco").show();var e=$(".hour_val.position_8").position().top;$(".main_calendar_day").scrollTop(e)}if("week"==a){$(".main_calendar_day").hide(),$(".main_calendar_week").show(),$(".main_calendar_month").hide(),$(".main_calendar_list").hide(),$("button.show_locco").show();e=$(".main_calendar_week tr.position_8").position().top;$(".main_calendar_week").scrollTop(e)}"list"==a&&($(".main_calendar_list").show(),$(".main_calendar_day").hide(),$(".main_calendar_week").hide(),$(".main_calendar_month").hide(),$(".change_car").hide(),$("button.show_locco").hide()),"month"==a&&($(".main_calendar_day").hide(),$(".main_calendar_week").hide(),$(".main_calendar_month").show(),$(".main_calendar_list").hide(),$("button.show_locco").show())}),$("button.show_loccos").on("click",function(e){e.preventDefault(),$(".main_calendar td>a").toggle(),$(".main_calendar .show_event").toggle(),$(".main_calendar .show_locco ").toggle(),$(".change_employee").toggle(),$(".change_car").toggle()});var i=$(".selected_day").position().top-30;$(".main_calendar_month").scrollTop(i),"day"==a?($(".change_view_calendar").val("day"),$(".main_calendar").hide(),$(".main_calendar_day").show()):"month"==a?($(".change_view_calendar").val("month"),$(".main_calendar").hide(),$(".main_calendar_month").show()):"week"==a?($(".change_view_calendar").val("week"),$(".main_calendar").hide(),$(".main_calendar_week").show()):"list"==a&&($(".change_view_calendar").val("list"),$(".main_calendar").hide(),$(".main_calendar_week").show())})}$(".calender_view").length>0&&$(".calender_view").pignoseCalendar({multiple:!1,week:1,init:function(a){t=$(".calendar_aside").height(),e=$(".calendar_main").height(),$("body").width()>450&&$("body").height()<768?$(".index_aside .day_events").height("fit-content"):$("body").width()>450&&$(".index_aside .day_events").height(t-e-110)},scheduleOptions:{colors:{event:"#1390EA",task:"#eb0e0e",birthday:"#EA9413",GO:"#13EA90",IZL:"#13EA90",BOL:"#13EA90",locco:"#009933"}},schedules:o,select:function(e,t,o){$(this);if(null!=e[0]&&"undefined"!=e[0]&&"undefined"!=e[0]._i&&null!=e[0]._i){var s=e[0]._i.split("-")[2],l=e[0]._i.split("-")[1],r=e[0]._i.split("-")[0]+"-"+l+"-"+s;if(a=$(".change_view_calendar").val(),"Invalid Date"!=new Date(r))i(n+"?dan="+r,r)}},prev:function(e,t){$(this),e.type;var a=e.year,o=e.month,s=e.day,l=(t.element,t.calendar,a+"-"+("0"+(new Date(a+"-"+o+"-"+s).getMonth()+1)).slice(-2)+"-"+("0"+s).slice(-2));"Invalid Date"!=new Date(l)&&i(n+"?dan="+l,l)},next:function(e,t){$(this),e.type;var a=e.year,o=e.month,s=e.day,l=(t.element,t.calendar,a+"-"+("0"+(new Date(a+"-"+o+"-"+s).getMonth()+1)).slice(-2)+"-"+("0"+s).slice(-2));"Invalid Date"!=new Date(l)&&i(n+"?dan="+l,l)}}),$(".index_aside .day_events").show()}),$(".shortcuts_container .shortcut").on("click",function(){$(".icon_delete").toggle()}),$(".shortcuts_container .new_open").on("click",function(){$('<div><div class="modal-header">Novi prečac</div><div class="modal-body" style="padding-top: 20px"><p>Da biste dodali prečac otvorite stranicu koju želite i u gornjem desnom kutu pronađite link za spremanje "Prečaca"</p><p>Ukoliko Prečac već postoji na stranici imate mogućnost promijeniti naslov prečaca</p></div></div>').modal()}),$(".shortcuts_container .open_new_shortcut").on("click",function(){$('<div><div class="modal-header">Novi prečac</div><div class="modal-body" style="padding-top: 20px"><p>Da biste dodali prečac otvorite stranicu koju želite i u gornjem desnom kutu pronađite link za spremanje "Prečaca"</p><p>Ukoliko Prečac već postoji na stranici imate mogućnost promijeniti naslov prečaca</p></div></div>').modal()});var shortcuts_container_width=$(".shortcuts_container").first().width(),shortcut_box_width=shortcuts_container_width/6;function mySearchTable(){$("#mySearchTbl").on("keyup",function(){var e=$(this).val().toLowerCase();$("#index_table tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)}),$("#index_table1 tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}function mySearchTableAbsence(){$("#mySearchTbl").on("keyup",function(){var e=$(this).val().toLowerCase();$("#index_table tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}function mySearchDoc(){$("#mySearch").on("keyup",function(){var e=$(this).val().toLowerCase();$("#index_table tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)}),$(".panel").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}function mySearch_col1(){var e,t,a,n;for(e=document.getElementById("mySearch").value.toUpperCase(),t=document.getElementById("myTable").getElementsByTagName("tr"),n=0;n<t.length;n++)null!=(a=t[n].getElementsByTagName("td")[0])&&(a.innerHTML.toUpperCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none")}function mySearchElement(){$("#mySearchElement").on("keyup",function(){var e=$(this).val().toLowerCase();$(".user_card").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}function GO_value(){"GO"==document.getElementById("prikaz").value?(document.getElementById("napomena").value="GO",document.getElementById("zahtjev").innerHTML="Zahtjev"):document.getElementById("napomena").value="","Bolovanje"==document.getElementById("prikaz").value&&(document.getElementById("zahtjev").innerHTML="Obavijest"),"Izlazak"==document.getElementById("prikaz").value&&(document.getElementById("zahtjev").innerHTML="Zahtjev"),"NPL"!=document.getElementById("prikaz").value&&"PL"!=document.getElementById("prikaz").value||(document.getElementById("zahtjev").innerHTML="Zahtjev"),"SLD"==document.getElementById("prikaz").value&&(document.getElementById("zahtjev").innerHTML="Zahtjev"),"Vik"==document.getElementById("prikaz").value&&(document.getElementById("zahtjev").innerHTML="Zahtjev")}$("#right-button-scroll").on("click",function(e){e.preventDefault(),$(".shortcuts_container .profile_images").animate({scrollLeft:"+=127px"},"slow"),$(".profile_images .scroll_left").show()}),$("#left-button-scroll").on("click",function(e){e.preventDefault(),$(".shortcuts_container .profile_images").animate({scrollLeft:"-=127px"},"slow")}),$(".event_show .type_event").on("click",function(){$(".event_hidden").show(),$("#event_type").val("event"),$(".event_show").hide()}),$(".event_show .type_task").on("click",function(){$(".event_hidden").show(),$("#event_type").val("task"),$(".event_show").hide()}),$(".event_show .type_other").on("click",function(){$(".event_hidden").show(),$("#event_type").val("other"),$(".event_show").hide()}),$(document).ready(function(){$("#mySearch").keyup(function(){var e=$(this).val().toLowerCase();$(".panel").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})}),$("#mySearch1").keyup(function(){var e=$(this).val().toLowerCase();$(".panel1").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})}),$("#mySearch_noticeboard").keyup(function(){var e=$(this).val().toLowerCase();$(".panel").parent().filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}),$(function(){var e,t,a=null,n=null,o=null;$(".change_month_afterhour").on("change",function(){a=$(this).val().toLowerCase(),""!=(n=$(".change_employee_afterhour").val())&&null!=n&&(n=n.replace("empl_","")),e=location.href+"?date="+a+"&employee_id="+n,$.ajax({url:e,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".change_employee_afterhour").on("change",function(){""!=(n=$(this).val().toLowerCase())&&null!=n&&(n=n.replace("empl_","")),a=$(".change_month_afterhour").val(),$.ajax({url:location.href+"?date="+a+"&employee_id="+n,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$("#admin_page >main").load(location.href+"?date="+a+"&employee_id="+n+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".filter_employees").not(".main_absence .filter_employees").on("change",function(){"all"==(n=$(this).val())&&(n=null),e=location.href+"?employee_id="+n,$("#filter_tasks").length>0&&("all"==(o=$("#filter_tasks").val())&&(o=null),e=e+"&task="+o),$("#filter_month").length>0&&("all"==(a=$("#filter_month").val())&&(a=null),e=e+"&date="+a),$("#filter_project").length>0&&("all"==(t=$("#filter_project").val())&&(t=null),e=e+"&project="+t),console.log(e),$.ajax({url:e,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){e.includes("work_diaries/1")?$(".page-main").load(e+" .page-main table",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")}):$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".filter_tasks").on("change",function(){o=$(this).val(),a=$("#filter_month").val(),n=$("#filter_employees").val(),e=location.href,"all"==o&&(o=null),e=e+"?task="+o,$("#filter_month").length>0&&("all"==(a=$("#filter_month").val())&&(a=null),e=e+"&date="+a),$("#filter_employees").length>0&&("all"==(n=$("#filter_employees").val())&&(n=null),e=e+"&employee_id="+n),$("#filter_project").length>0&&("all"==(t=$("#filter_project").val())&&(t=null),e=e+"&project="+t),console.log(e),$.ajax({url:e,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){e.includes("work_diaries/1")?$(".page-main").load(e+" .page-main table",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")}):$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".filter_project").on("change",function(){"all"==(t=$(this).val())&&(t=null),e=location.href+"?project="+t,$("#filter_tasks").length>0&&("all"==(o=$("#filter_tasks").val())&&(o=null),e=e+"&task="+o),$("#filter_employees").length>0&&("all"==(n=$("#filter_employees").val())&&(n=null),e=e+"&employee_id="+n),$("#filter_month").length>0&&("all"==(a=$("#filter_month").val())&&(a=null),e=e+"&date="+a),console.log(e),$.ajax({url:e,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){e.includes("work_diaries/1")?$(".page-main").load(e+" .page-main table",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")}):$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$("#filter").on("change",function(){var e=$("#filter").val().toLowerCase();"all"==e?$(".panel").show():$(".panel").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})}),$("#filter_car").on("change",function(){var t=$("#filter_month").val().toLowerCase(),a=$("#filter_car").val();"all"==t&&(t=null),"all"==a&&(a=null),e=(e=location.href+"?date="+t)+"&car="+a,console.log(e),$.ajax({url:e,type:"get",data:{date:t},beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".filter_notices").on("change",function(){a=$("#filter_month").val().toLowerCase(),e=location.href+"?date="+a,console.log(e),$.ajax({url:e,type:"get",data:{date:a},beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".notices").load(location.href+"?date="+a+" .notices>article",function(){$("#loader").remove(),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$("#filter_month").on("change",function(){"all"==(a=$("#filter_month").val().toLowerCase())&&(a=null),e=location.href+"?date="+a,$("#filter_tasks").length>0&&("all"==(o=$("#filter_tasks").val())&&(o=null),e=e+"&task="+o),$("#filter_employees").length>0&&("all"==(n=$("#filter_employees").val())&&(n=null),e=e+"&employee_id="+n),$("#filter_project").length>0&&("all"==(t=$("#filter_project").val())&&(t=null),e=e+"&project="+t),$("#filter_car").length>0&&(car=$("#filter_car").val(),"all"==car&&(car=null),e=e+"&car="+car),console.log(e),$.ajax({url:e,type:"get",data:{date:a},beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){e.includes("work_diaries/1")?$(".page-main").load(e+" .page-main table",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")}):$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){console.log("show_button click 3"),$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".filter_travel").on("change",function(){var t=$("#filter_employee").val().toLowerCase(),a=$("#filter_date").val().toLowerCase();e=location.origin+"/travel_orders","all"==t&&(t=""),"all"==a&&(a=""),""==t&&""==a?$(".panel").show():$(".panel").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(a)>-1&&$(this).text().toLowerCase().indexOf(t)>-1)})}),$(".section_notice .notices").length>0&&$(".select_filter.sort").on("change",function(){$(".section_notice .notices").load($(this).val()+" .section_notice .notices .noticeboard_notice_body")}),$(".filter_checkout").on("change",function(t){var a=$(this).val();e=location.href+"?status="+a,console.log(e),$.ajax({url:e,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(t){$("#admin_page >main").load(e+" #admin_page >main .table-responsive",function(){$("#loader").remove(),$.getScript("/../js/open_modal.js"),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$.getScript("/../restfulizer.js")})},error:function(e,t,a){console.log(e.responseJSON.message)}})}),$(".table-responsive.roles").length>0&&($(".more").on("click",function(){$(this).siblings(".role").toggle(),$(this).hide(),$(this).siblings(".hide").show()}),$(".hide").on("click",function(){$(this).siblings(".role").hide(),$(this).siblings(".role._0").show(),$(this).siblings(".role._1").show(),$(this).siblings(".more").show(),$(this).hide()}))}),$(function(){var e=$(".event_day .day").text(),t=$(".event_day .month").text(),a=$(".event_day .year").text(),n=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=new Date(a+"-"+t+"-"+e);$(".arrow .day_before").click(function(){var e=new Date(i.setDate(i.getDate()-1)),t=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);$(".event_day .day").text(e.getDate()),$(".event_day .week_day").text(n[e.getDay()]),$(".month_year").text(o[e.getMonth()]+" "+e.getFullYear()),$(".pignose-calendar-body").find('[data-date="'+t+'"] > a').click()}),$(".arrow .day_after").click(function(){var e=new Date(i.setDate(i.getDate()+1)),t=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);$(".event_day .day").text(e.getDate()),$(".event_day .week_day").text(n[e.getDay()]),$(".month_year").text(o[e.getMonth()]+" "+e.getFullYear()),$(".pignose-calendar-body").find('[data-date="'+t+'"] > a').click()})}),$(".side_navbar a.link1").click(function(e){e.preventDefault();var t=$(this).attr("href");$(".container").load(t+" .container .row"),$(".side_navbar a").removeAttr("style"),$(".nav li").removeAttr("style"),$(".nav .link_ads").removeAttr("style"),$(".link_admin").removeAttr("style"),$(this).css("color","orange")}),$("nav.navbar a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$(".container").load(t+" .container .row"),$("nav a").removeAttr("style"),$(".side_navbar a").removeAttr("style"),$(this).css("color","orange")}),$(".side_navbar a.link3").on("click",function(e){$(this).attr("href");$("nav li").removeAttr("style"),$(".side_navbar a").removeAttr("style"),$(this).css("color","orange")});var date,prev_url=location.href,section_top_width=$(".section_top_nav").width();function myTopNav(){var e=$(".section_top_nav");e.hasClass("responsive")?e.removeClass("responsive"):e.addClass("responsive")}$("span.logo_icon").on("click",function(){$(".section_top_nav").css("width","250px"),$('#myTopnav:not(".responsive")').css("display","block"),$('#myTopnav:not(".responsive")').css("width","250px"),$(".header_nav .section_top_nav .close_topnav svg").show()}),$(".close_topnav").on("click",function(){$(".header_nav .section_top_nav .close_topnav svg").hide(),$('#myTopnav:not(".responsive")').css("display","none"),$('#myTopnav:not(".responsive")').css("width",0),$(".section_top_nav").css("width",0)}),(body_width=$("body").width())>768&&($("body").on("click",function(){$(".close_topnav").trigger("click")}),$(".logo_icon").on("click",function(e){e.stopPropagation()}),$(".section_top_nav").on("click",function(e){e.stopPropagation()})),$("a[rel='modal:open']").addClass("disable"),$(function(){$("a[rel='modal:open']").removeClass("disable"),(url_modul=(url_modul=window.location.pathname).replace("/","")).indexOf("/")>0&&(url_modul=url_modul.slice(0,url_modul.indexOf("/"))),url_modul.includes("campaign_sequences")?($(".button_nav").removeClass("active"),$(".button_nav.campaigns_button").addClass("active")):"admin_panel/"==url_modul||$(".button_nav."+url_modul+"_button").length>0&&($(".button_nav").removeClass("active"),$(".button_nav."+url_modul+"_button").addClass("active"))}),$(".form_evidention").on("submit",function(e){e.preventDefault();var t=location.origin+"/work_records",a=$(this);a.find("button").attr("disabled","disabled");var n=a.serialize();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,type:"POST",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-success"></span></div><div class="modal-body"><div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>success:</strong>'+e+"</div></div></div>").appendTo("body").modal(),$(".header_nav").load(location.href+" .header_nav .topnav",function(){$.getScript("/../js/nav_active.js")})},error:function(e,t,a){console.log(e.responseJSON),$(this).show();var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.modal.close(),$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>Prijava nije uspjela, osvježi stranicuu i pokušaj ponovno</div></div></div>').appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),body_width<450&&document.addEventListener("visibilitychange",function(){document.hidden||location.reload()}),$("body").on($.modal.OPEN,function(e,t){$("input[type=datetime-local]").length>0&&$("input[type=datetime-local]").on("change",function(){"Invalid Date"==(date=new Date($(this).val()))?($('<div class="error_date danger">Neispravan unos datuma. Molim provjeri!</div>').modal(),$(".btn-submit").attr("disabled","disabled")):($(".btn-submit").attr("disabled",!1),$(".error_date").remove())}),$("input[type=date]").length>0&&$("input[type=date]").on("change",function(){"Invalid Date"==(date=new Date($(this).val()))?($('<div class="error_date danger">Neispravan unos datuma. Molim provjeriti</div>').modal(),$(".btn-submit").attr("disabled","disabled")):($(".btn-submit").attr("disabled",!1),$(".error_date").remove())})}),$(".button_nav").css({}),$(".button_nav.active").css({});prev_url=location.href;$(".admin_pages a.admin_link").addClass("disable");body_width=$("body").width();var active_link,url_modul,click_element,title,sequence_id,order,i,url_location=location.href;if(url_modul=(url_modul=(url_modul=location.pathname).replace("/","")).split("/")[0],$(function(){if($(".index_admin").length>0){var e;body_width>992&&null!=(e=$(".admin_link.active_admin").parent().attr("class"))&&""!=e&&(e="."+e.replace(" ","."),$(e).show()),$(".open_menu").on("click",function(t){t.preventDefault(),e=$(this).attr("id"),$("."+e).toggle()}),$(".admin_pages a.admin_link").removeClass("disable");try{url_location=location.href,$.get(location.origin+"/shortcut_exist",{url:url_location},function(e){null!=e&&""!=e?($(".shortcut").attr("href",location.origin+"/shortcuts/"+e+"/edit/"),$(".shortcut_text").text("Ispravi prečac")):(title=$(".admin_link.active_admin").attr("id"),$(".shortcut").attr("href",location.origin+"/shortcuts/create/?url="+url_location+"&title="+title),$(".shortcut_text").text("Dodaj prečac"))})}catch(e){}}$(".select_filter").not(".sort").length>0&&selectSearch()}),0==$(".index_table_filter .show_button").length&&$(".index_table_filter").append('<span class="show_button"><i class="fas fa-download"></i></span>'),$(".index_admin").length>0&&($(".admin_pages li>a").not(".open_menu").on("click",function(e){$("#login-modal").remove(),e.preventDefault(),click_element=$(this),title=click_element.text(),$("title").text(title),url=$(this).attr("href");try{$.get(location.origin+"/shortcut_exist",{url:url},function(e){null!=e&&""!=e&&e?($(".shortcut").attr("href",location.origin+"/shortcuts/"+e+"/edit/"),$(".shortcut_text").text("Ispravi prečac")):(title=$(".admin_link.active_admin").attr("id"),$(".shortcut").attr("href",location.origin+"/shortcuts/create/?url="+url+"&title="+title),$(".shortcut_text").text("Dodaj prečac"))})}catch(e){}return $(".admin_pages>li>a").removeClass("active_admin"),$(this).addClass("active_admin"),active_link=$(".admin_link.active_admin").attr("id"),$(".admin_main").load(url+" .admin_main>section",function(e,t,a){if(window.history.replaceState({},document.title,url),"error"==t){$("#error").html("Sorry but there was an error: "+a.status+" "+a.statusText)}$(".show_button_upload").length>0&&$(".show_button_upload").on("click",function(){$("form.upload_file").modal(),$("form.upload_file").show()}),$.getScript("/../restfulizer.js"),$.getScript("/../js/filter_dropdown.js"),$.getScript("/../js/open_modal.js"),$.getScript("/../js/datatables.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),$(".select_filter").not(".sort").length>0&&selectSearch(),url.includes("/work_records")?$.getScript("/../js/work_records.js"):url.includes("/loccos")&&$("a.open_locco").on("click",function(e){return e.preventDefault(),click_element=$(this),title=click_element.text(),$("title").text(title),url=$(this).attr("href"),$(".admin_main").load(url+" .admin_main>section",function(e,t,a){if(window.history.replaceState({},document.title,url),"error"==t){$("#error").html("Sorry but there was an error: "+a.status+" "+a.statusText)}$(".show_button_upload").length>0&&$(".show_button_upload").on("click",function(){$("form.upload_file").modal(),$("form.upload_file").show()}),$.getScript("/../restfulizer.js"),$.getScript("/../js/filter_dropdown.js"),$.getScript("/../js/datatables.js"),$.getScript("/../js/open_modal.js"),$.getScript("/../select2-develop/dist/js/select2.min.js"),$(".select_filter").not(".sort").length>0&&selectSearch()}),!1}),body_width<992&&($("aside.admin_aside").hide(),$("main.admin_main").show(),$(".link_back").on("click",function(e){e.preventDefault(),$("aside.admin_aside").show(),$("main.admin_main").hide()}))}),!1}),$(".show_button_upload").length>0&&$(".show_button_upload").on("click",function(){$("form.upload_file").modal(),$("form.upload_file").show()})),$("a[rel='modal:open']").addClass("disable"),$(function(){$("a[rel='modal:open']").removeClass("disable"),$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5},$('.btn-new:not(.create_notice), .add_new, a.create_user[rel="modal:open"], #add_event[rel="modal:open"], .oglasnik_button, .posts_button, .doc_button, .events_button').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('a.create_notice[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_notice",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('a.notice_show[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_notice notice_show",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('.questionnaires_button, a.qname[rel="modal:open"], a.new_questionnaire[rel="modal:open"], .thumb_content a[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_questionnaire",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('a.open_statistic[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_notice notice_show statistic_index",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('a.user_show[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_user",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$(".user_show.tr_open_link").on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_user",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$('a.campaign_show[rel="modal:open"]').on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_notice modal_campaign",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$(".open_car_modal").on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal car_modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$(".evidention_check > button").on("click",function(){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$("tr[data-modal] td:not(:last-child)").on("click",function(e){e.preventDefault();var t=location.origin+$(this).parent().data("href");$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5},$.get(t,function(e){$(e).appendTo("#login-modal")}),$("#login-modal").modal(),$("#login-modal").on($.modal.CLOSE,function(e,t){$("#login-modal").empty()}),$("a.close-modal").on("click",function(){$("#login-modal").empty()})}),$("tr.tr_open_link_new_page td:not(.not_link)").on("click",function(e){e.preventDefault(),url=location.origin+$(this).parent().attr("data-href"),console.log(url),window.location=url})}),$(".posts_index").length>0){body_width=$("body").width();var form,data,post_id,tab_id,content,refresh_height,mess_comm_height,comment_height,active_tabcontent,mouse_is_inside=!1;function submit_form(){$(".form_post").on("submit",function(e){if(e.preventDefault(),""==$(this).find(".post-content").val())return!1;form=$(this),data=form.serialize(),url="/commentStore",post_id=$(this).find("input[name=post_id]").val(),content=$(this).find("input[name=content]").val(),tab_id="_"+post_id,$(".post-content").val(""),$(".refresh."+tab_id).append('<b><div class="message"><div class="right"><p class="comment_empl"><small>sada</small></p><div class="content"><p class="comment_content" >'+content+"</p></div></div></div><b>"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"post",url:url,data:data,success:function(e){$.get(location.origin+"/posts",function(e,t){var a=$(".posts>.all_post",e).get(0).outerHTML;$(".posts").html(a);var n=$(".posts_button .button_nav_img .line_btn",e).get(0).outerHTML;$(".posts_button .button_nav_img").html(n);var o=$(".index_main>section",e).get(0).outerHTML;$(".index_main").html(o),$(".tabcontent#"+tab_id).show(),submit_form(),refreshHeight(tab_id),setPostAsRead(post_id)}),$(".tablink#"+post_id).trigger("click")},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}}),$(".post-content").css("line-height","70px")})}function tablink_on_click(){$(".tablink").on("click",function(){post_id=$(this).attr("id"),tab_id="_"+post_id,body_width<768&&($(".latest_messages").hide(),$(".posts_index .index_main").show()),$(".tabcontent").hide(),active_tabcontent=$(".tabcontent#"+tab_id),$(active_tabcontent).show(),$.get(location.origin+"/posts",function(e,t){var a=$(".posts>.all_post",e).get(0).outerHTML;$(".posts").html(a);var n=$(".posts_button .button_nav_img .line_btn",e).get(0).outerHTML;$(".posts_button .button_nav_img").html(n);var o=$(".index_main>section",e).get(0).outerHTML;$(".index_main").html(o),$(".tabcontent#"+tab_id).show(),$("#"+tab_id+" .type_message").trigger("focus"),submit_form(),null!=post_id&&(refreshHeight(tab_id),setPostAsRead(post_id)),$(".post_sent .link_back").on("click",function(){$(".latest_messages").show(),$(".posts_index .index_main").hide(),console.log("link_back")})})})}function setPostAsRead(e){var t=location.origin+"/setCommentAsRead/"+e;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"GET",url:t,success:function(t){$(".tablink#"+e).load(location.href+" .tablink#"+e+">span",function(){tablink_on_click()})},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}function refreshHeight(e){mess_comm_height=$("#"+e).find(".mess_comm").height(),refresh_height=90,$(".refresh."+e+" .message").each(function(){refresh_height+=$(this).height()}),comment_height=$("#"+e).find(".comments").height(),refresh_height<mess_comm_height&&$("#"+e).find(".refresh").css({position:"absolute",bottom:"0",width:"100%"}),refresh_height>comment_height?($("#"+e).find(".refresh").css({position:"static",bottom:"0",height:"100%"}),$("#"+e).find(".refresh").scrollTop(refresh_height)):$("#"+e).find(".mess_comm").scrollTop(refresh_height),$("#"+e).find(".mess_comm").scrollTop(refresh_height)}function broadcastingPusher(){var e=$("#employee_id").text();new Pusher("d2b66edfe7f581348bcc",{cluster:"eu"}).subscribe("message_receive").bind("my-event",function(t){console.log(t.comment),e==t.show_alert_to_employee&&($(".all_post ").load(location.origin+"/posts .all_post .main_post"),$(".posts_button .button_nav_img").load(location.origin+"/posts .posts_button .button_nav_img .line_btn"),$(".refresh."+tab_id).load(location.origin+"/posts .refresh."+tab_id+" .message",function(){tablink_on_click()}))})}function onKeyClick(){if(13!==window.event.keyCode)return!0;$(".post-content").css("line-height","unset")}$(function(){broadcastingPusher(),tablink_on_click(),submit_form(),$(".placeholder").show(),$(".type_message").attr("Placeholder","Type message..."),$(".type_message").on("focus",function(){$(this).attr("Placeholder","")}),$(".type_message").on("blur",function(){$(this).attr("Placeholder","Type message...")}),$(".search_post").on("click",function(){$(".search_input").show()}),$(document).on("mouseup",function(e){var t=$(".search_input");t.is(e.target)||0!==t.has(e.target).length||t.hide()}),url=location.search,body_width>768&&location.href.includes("/posts")&&(url?(id=url.replace("?id=",""),$(".tablink#"+id).trigger("click"),history.pushState({},"",location.origin+"/posts")):$(".tablink").first().trigger("click"))})}$(function(){if($(".main_questionnaire").length>0){if($("body").width()>450){var e=$(".index_main.main_documents").height()-$(".page-header.header_questionnaire").height();$(".all_documents").height(e-65)}$(".index_page table.dataTable.no-footer").css("height","fit-content");var t=$(".preview_doc").width(),a=217;$(".preview_doc .thumb_container").each((e,t)=>{a+=217}),a>t&&$(".preview_doc .scroll_right").show(),$(".clickable-row").click(function(){}),$(".collapsible").click(function(e){$(this).siblings().toggle()}),$("#right-button").click(function(){event.preventDefault(),$(".preview_doc").animate({scrollLeft:"+=217px"},"slow"),$(".preview_doc .scroll_left").show()}),$(".sendEmail").click(function(){if(!confirm("Stvarno želiš poslati obavijest mailom?"))return!1}),$("#left-button").click(function(){event.preventDefault(),$(".preview_doc").animate({scrollLeft:"-=217px"},"slow"),$(".preview_doc").scrollLeft()<217?$(".preview_doc .scroll_left").hide():$(".preview_doc .scroll_left").show()}),$(".show").click(function(){if($(".show").toggle(),$(".hide").toggle(),$(".preview_doc").toggle(),$("body").width()>1200){var e=$(".index_main.main_documents").height()-$(".page-header.header_questionnaire").height();$(".all_documents").height(e-65);var t=$(".preview_doc.preview_q .thumb_container").last().height();$(".thumb_container").first().height(t)}}),$(".hide").click(function(){$(".show").toggle(),$(".hide").toggle(),$(".preview_doc").toggle();var e=$(".index_main.main_documents").height()-$(".page-header.header_questionnaire").height();$(".all_documents").height(e-65)}),$(".main_questionnaire .change_view").on("click",function(){$(".change_view").toggle(),$(".change_view2").toggle(),$(".table-responsive.first_view").toggle(),$(".table-responsive.second_view").toggle()}),$(".main_questionnaire .change_view2").on("click",function(){$(".change_view").toggle(),$(".change_view2").toggle(),$(".table-responsive.first_view").toggle(),$(".table-responsive.second_view").toggle()})}}),$(window).resize(function(){if($("body").width()>1200){var e=$(".index_main.main_documents").height()-$(".page-header.header_questionnaire").height();$(".all_documents").height(e-65)}}),$(function(){var e=$(".modal.modal_questionnaire").height()-$(".modal-header").height()-80;$("body").width()>450&&$(".modal.modal_questionnaire .modal-body").height(e);var t=0;$("textarea").each(function(){t+=1}),$('input[type="radio"]').parent().parent().each(function(){t+=1}),$('input[type="checkbox"]').parent().parent().each(function(){t+=1}),$("#questionnaire_form span.progress_val").text("0/"+t);var a=function(){var e=$("input[type=radio]:checked").length;$("textarea").each(function(){""!=$(this).val()&&(e+=1)}),$('input[type="checkbox"]:checked').parent().parent().each(function(){e+=1}),$("#questionnaire_form span.progress_val").text(e+"/"+t);var a=e/t*100;$("#questionnaire_form .progress_bar .progress").css("width",a+"%")};a(),$("input[type=radio]").on("click",a),$("input[type=checkbox]").on("click",a),$("textarea").on("change",a)}),$(window).on("resize",function(){var e=$(".modal.modal_questionnaire").height()-$(".modal-header").height()-80;$(".modal.modal_questionnaire .modal-body").height(e)}),$(".btn-statistic").on("click",function(){$(".statistic").toggle();var e=$(".modal.modal_questionnaire").height()-$(".modal-header").height()-80;$(".modal.modal_questionnaire .modal-body").height(e)}),$(".emails_email_body").length>0&&$("#sortable").sortable({stop:function(e,t){var a,n=[];for(a=e.target.children,order=0,i=0;i<a.length;i++)""!=(sequence_id=a[i].id)&&(order++,console.log(a[i]),console.log($(a[i]).find(".emails_order_no .order_no")),$(a[i]).find(".emails_order_no .order_no").text(i+1),n.push(sequence_id));var o=location.origin+"/setOrder";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"post",url:o,data:{sequences_id:n},success:function(e){$(".section_emails .emails").load(location.href+" .section_emails .emails .emails_email_body")},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}}),$(function(){$('a.notice_show[rel="modal:open"]').on("click",function(){$(".modal").addClass("modal_notice"),$(".modal").addClass("notice_show");var e=$(".modal.modal_notice").height()-$(".modal-header").height()-65;$(".modal_notice.notice_show .modal-body").height(e)})}),$(window).on("resize",function(){var e=$(".modal.modal_notice").height()-$(".modal-header").height()-65;$(".modal_notice.notice_show .modal-body").height(e)}),$(".btn-statistic").on("click",function(){$(".statistic").toggle(),$(".modal").addClass("modal_notice"),$(".modal").addClass("notice_show");var e=$(".modal.modal_notice").height()-$(".modal-header").height()-65;$(".modal_notice.notice_show .modal-body").height(e)}),$(function(){var e=1;function t(e){var t=$(".mySlides"),a=$(".mySlides_info");e=e>$(t).length?1:e<1?$(t).length:e,$(t).each(function(t,a){t==e-1?($(a).show(),$(a).addClass("block"),$(a).css("display","block")):($(a).hide(),$(a).removeClass("block"))}),$(a).each(function(t,a){t==e-1?($(a).show(),$(a).addClass("block"),$(a).css("display","block")):($(a).hide(),$(a).removeClass("block"))})}function a(e){var a,n=$(".mySlides");$(n).each(function(e,t){$(t).hasClass("block")&&(a=e+1)}),t(a+=e)}$(".slide_index")&&(e=$(".slide_index").text()),t(e),$(".prev").click(function(){a(-1)}),$(".next").click(function(){a(1)})});var temp;url=$("form.form_template").attr("action"),data_new={};try{unlayer.init({appearance:{theme:"light",panels:{tools:{dock:"left"}}},mergeTags:{first_name:{name:"First Name",value:"Jelena"},last_name:{name:"Last Name",value:"Juras"}},id:"editor-container",projectId:4441,displayMode:"email"}),unlayer.addEventListener("design:updated",function(e){unlayer.exportHtml(function(e){json=e.design,html=e.html,body=json.body,design=e.design})})}catch(error){}$(".form_template.template_create .btn-submit").on("click",function(e){var t=[];e.preventDefault();var a=$("#form_template")[0],n=new FormData(a);n.append("text_json",JSON.stringify(design)),n.append("text",html),form_data_array=$(".form_template").serializeArray(),jQuery.each(form_data_array,function(e,a){""==a.value?t.push("block"):t.push(!0)}),null==html||null==JSON.stringify(design)?t.push("block"):t.push(!0),console.log(t),t.includes("block")?(e.preventDefault(),alert("Nisu uneseni svi parametri, nemoguće spremiti predložak")):$.ajax({type:"POST",enctype:"multipart/form-data",url:url,data:n,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){alert("Dizajn je spremljen!"),console.log("responce : ",e),$(".btn-submit").prop("disabled",!1),location.reload()},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),$(function(){$(".nav-link").css("background-color","#F8FAFF !important"),$(".active.nav-link").css("background-color","#1594F0 !important")}),$(".dataArrTemplates").text()&&(dataArrTemplates=JSON.parse($(".dataArrTemplates").text()),$.each(dataArrTemplates,function(e,t){htmlTemplates=dataArrTemplates[e].text;var a=dataArrTemplates[e].title;$("#template-container").append('<span class="template_button blockbuilder-content-tool" id="'+e+'"><div>'+a+"</div></span>")})),$(".template_button").on("click",function(){temp=$(this).attr("id"),designTemplates=JSON.parse(dataArrTemplates[temp].text_json),htmlTemplates=dataArrTemplates[temp].text,unlayer.loadDesign(designTemplates),$(".show_temp#temp"+temp).remove()}),$(".template_button").on("mouseover",function(){temp=$(this).attr("id"),htmlTemplates=dataArrTemplates[temp].text,$("body").append('<span class="show_temp" id="temp'+temp+'">'+htmlTemplates+"</span>"),$(".show_temp#temp"+temp).show()}),$(".template_button").on("mouseout",function(){$(".show_temp#temp"+temp).remove()});var dataArrTemplates,htmlTemplates,designTemplates;url=$("form.form_template").attr("action"),data_new={};try{if(unlayer.init({appearance:{theme:"light",panels:{tools:{dock:"left"}}},id:"editor-container",projectId:4441,displayMode:"email"}),unlayer.setMergeTags({first_name:{name:"First Name",value:"Jelena"},last_name:{name:"Last Name",value:"Juras"}}),$(".dataArr").text()){design=JSON.parse($(".dataArr").text());unlayer.loadDesign(design)}$(".template").on("change",function(){$(this).val();unlayer.loadTemplate(12187)}),unlayer.addEventListener("design:updated",function(e){unlayer.exportHtml(function(e){json=e.design,html=e.html,design=e.design})})}catch(error){}$(".form_template.template_edit .btn-submit").on("click",function(e){var t=[];e.preventDefault();var a=$("#form_template")[0],n=new FormData(a);n.append("text_json",JSON.stringify(design)),n.append("text",html),form_data_array=$(".form_template").serializeArray(),jQuery.each(form_data_array,function(e,a){""==a.value?t.push("block"):t.push(!0)}),console.log(t),t.includes("block")?(e.preventDefault(),alert("Nisu uneseni svi parametri, nemoguće spremiti obavijest")):$.ajax({type:"POST",enctype:"multipart/form-data",url:url,data:n,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){alert("Dizajn je spremljen!"),console.log("responce : ",e),$(".btn-submit").prop("disabled",!1)},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}})}),$(function(){$(".nav-link").css("background-color","#F8FAFF !important"),$(".active.nav-link").css("background-color","#1594F0 !important")}),$(".dataArrTemplates").text()&&(dataArrTemplates=JSON.parse($(".dataArrTemplates").text()),$.each(dataArrTemplates,function(e,t){htmlTemplates=dataArrTemplates[e].text;var a=dataArrTemplates[e].title;$("#template-container").append('<span class="template_button blockbuilder-content-tool" id="'+e+'"><div>'+a+"</div></span>")})),$(".template_button").on("click",function(){temp=$(this).attr("id"),designTemplates=JSON.parse(dataArrTemplates[temp].text_json),htmlTemplates=dataArrTemplates[temp].text,unlayer.loadDesign(designTemplates),$(".show_temp#temp"+temp).remove()}),$(".template_button").on("mouseover",function(){temp=$(this).attr("id"),htmlTemplates=dataArrTemplates[temp].text,$("body").append('<span class="show_temp" id="temp'+temp+'">'+htmlTemplates+"</span>"),$(".show_temp#temp"+temp).show()}),$(".template_button").on("mouseout",function(){$(".show_temp#temp"+temp).remove()}),$("#tinymce_textarea").length>0&&(tinymce.init({selector:"#tinymce_textarea",height:300,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount"],menubar:"file edit insert view format table tools help",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(e,t,a){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.onchange=function(){var t=this.files[0],a=new FileReader;a.onload=function(){var n="blobid"+(new Date).getTime(),o=tinymce.activeEditor.editorUpload.blobCache,i=a.result.split(",")[1],s=o.create(n,t,i);o.add(s),e(s.blobUri(),{title:t.name})},a.readAsDataURL(t)},n.click()},content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}),$("body").on($.modal.CLOSE,function(e,t){$.getScript("/../node_modules/tinymce/tinymce.min.js")})),saved="en"==(locale=$(".locale").text())?"Data saved successfully.":"Podaci su spremljeni",$(".close_travel").click(function(e){console.log("close_travel"),e.preventDefault(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t=$(this).attr("href");console.log(t),$.ajax({url:t,type:"get",success:function(e){$("tbody").load(location.origin+"/travel_orders tbody>tr",function(){$.getScript("/../restfulizer.js"),$.getScript("/../js/travel.js")}),$('<div><div class="modal-header"><span class="img-success"></span></div><div class="modal-body"><div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>success:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}),$(".load_page").click(function(e){e.preventDefault();var t=$(this).attr("href");$(".container").load(t+" .container > .row > div",function(){$.getScript("js/upload_page.js")})}),$(function(){var e=$(".profile_images").width(),t=0;$(".profile_images > .profile_img").each((e,a)=>{t+=$(a).width()}),t>e&&$(".profile_images .scroll_right").show(),$(".profile_images #right-button").on("click",function(e){e.preventDefault(),$(this).parent().animate({scrollLeft:"+=200px"},"slow"),$(".profile_images .scroll_left").show()}),$(".profile_images #left-button").on("click",function(e){e.preventDefault(),$(this).parent().animate({scrollLeft:"-=115px"},"slow"),$(".profile_images").scrollLeft()<115?$(".profile_images .scroll_left").hide():$(".profile_images .scroll_left").show()})}),$.getScript("/../js/filter_table.js"),$(".users_main").length>0&&($(".more").on("click",function(){$(this).siblings(".role").toggle(),$(this).hide(),$(this).siblings(".hide").show()}),$(".hide").on("click",function(){$(this).siblings(".role").hide(),$(this).siblings(".role._0").show(),$(this).siblings(".role._1").show(),$(this).siblings(".more").show(),$(this).hide()}),$(".user_header .change_view").on("click",function(){$(".index_table_filter label #mySearchTbl").attr("id","mySearchElement"),$(".index_table_filter label #mySearchElement").attr("onkeyup","mySearchElement()"),$(".change_view").toggle(),$(".change_view2").toggle(),$("main.users_main .second_view").css("display","flex"),$(".table-responsive").toggle()}),$(".user_header .change_view2").on("click",function(){$(".index_table_filter label #mySearchElement").attr("id","mySearchTbl"),$(".index_table_filter label #mySearchTbl").attr("onkeyup","mySearchTable()"),$(".change_view").toggle(),$(".change_view2").toggle(),$(".second_view").css("display","none"),$(".table-responsive").toggle()}),$("a.show_user").on("click",function(e){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal modal_user",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$("a.edit_user").on("click",function(e){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}),$("a.create_user").on("click",function(e){$.modal.defaults={closeExisting:!1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,fadeDuration:null,fadeDelay:.5}}));var validate_text,email_unique,error,request_send,status_requests,all_requests,done,saved,locale=$(".locale").text(),validate=[];"en"==locale?(validate_text="Required field",email_unique="Email must be unique",error="There was an error",saved="Data saved successfully.",request_send="Request sent",status_requests="To see you request status and see all request visit All requests page",all_requests="All requests",done="Done",validate_name="Required name entry",validate_lastname="Required lastname entry ",validate_email="Required e-mail entry",validate_password="Required password entry",validate_passwordconf="Password confirmation required",validate_password_lenght="Minimum of 6 characters is required",validate_role="Required role assignment"):(validate_text="Obavezno polje",email_unique="E-mail mora biti jedinstven",error="Došlo je do greške, poslana je poruka na podršku",saved="Podaci su spremljeni",request_send="Zahtjev je poslan",status_requests="Da biste vidjeli status zahtjeva i pogledali sve zahtjeve posjetite Svi zahtjevi stranicu",all_requests="Svi zahtjevi",done="Gotovo",validate_name="Obavezan unos imena",validate_lastname="Obavezan unos prezimena",validate_email="Obavezan unos emaila",validate_password="Obavezan unos lozinke",validate_passwordconf="Obavezna potvrda lozinke",validate_password_lenght="Obavezan unos minimalno 6 znaka",validate_role="Obavezna dodjela uloge"),$(".remove").on("click",function(){$(this).parent().remove()});var page=$(".admin_pages li").find("a.active_admin"),modul_name=$(".admin_pages li").find("a.active_admin").attr("id");function validate_user_form(){validate=[],$(".roles").on("change",function(e){roles.is(":checked")?validate.push(!0):validate.push("block"),console.log("validate roles")}),$("textarea").each(function(e){"required"==$(this).attr("required")&&(0==$(this).val().length?($(this).parent().find(".modal_form_group_danger").length||$(this).parent().append('<p class="modal_form_group_danger">'+validate_text+"</p>"),validate.push("block")):($(this).parent().find(".modal_form_group_danger").remove(),validate.push(!0))),console.log("validate textarea")}),$("input").not(".roles").each(function(e){"required"==$(this).attr("required")&&(0==$(this).val().length||""==$(this).val()?($(this).parent().find(".modal_form_group_danger").length||$(this).parent().append('<p class="modal_form_group_danger">'+validate_text+"</p>"),validate.push("block")):($(this).parent().find(".modal_form_group_danger").remove(),validate.push(!0)),console.log("validate input"))}),$("select").each(function(e){"required"==$(this).attr("required")&&(null==$(this).val()||""==$(this).val()||""==$(this).val()?($(this).parent().find(".modal_form_group_danger").length||$(this).parent().append('<p class="modal_form_group_danger">'+validate_text+"</p>"),validate.push("block")):($(this).parent().find(".modal_form_group_danger").remove(),validate.push(!0)),console.log("validate select"))}),$("#password").length>0&&(password=$("#password"),conf_password=$("#conf_password"),$(password).length>0&&""!=$(password).text()&&(password.val().length<6?(0==password.parent().find(".validate").length?password.parent().append(' <p class="validate">'+validate_password_lenght+"</p>"):password.parent().find(".validate").text(validate_password_lenght),validate.push("block")):(password.parent().find(".validate").text(""),$(conf_password).val()&&$(password).val()==conf_password.val()?(conf_password.parent().find(".validate").text(""),validate.push(!0)):(0==conf_password.parent().find(".validate").length&&conf_password.parent().append(' <p class="validate">'+validate_passwordconf+"</p>"),validate.push("block")))),console.log("validate password"))}$('input[type="file"]').on("change",function(e){fileName=e.target.files[0].name,$("#file_name").text(fileName)}),$(".btn-submit").on("click",function(e){var t=$(this).parents("form:first");let a=$(this).parents("form:first").attr("action");var n=t.serialize();window.location.href,window.location.pathname;validate_user_form(),console.log(a),console.log(n),console.log(validate),validate.includes("block")?(e.preventDefault(),validate=[]):($(".roles_form .checkbox").show(),$(page).length>0?$(page).trigger("click"):$(".btn-submit").trigger("unbind"))}),$(".form_user .btn-next").on("click",function(e){f_name=$("#first_name"),l_name=$("#last_name"),email=$("#email"),password=$("#password"),conf_password=$("#conf_password"),file=$("#file"),validate=[],validate_user_form(),console.log(validate),validate.includes("block")||($(".first_tab").toggle(),$(".second_tab").toggle(),$(".first_tab").is(":visible")&&($(".mark1").css("background","#1594F0"),$(".mark2").css("background","rgba(43, 43, 43, 0.2)")),$(".second_tab").is(":visible")&&($(".mark1").css("background","rgba(21, 148, 240, 0.4)"),$(".mark2").css("background","#1594F0")))}),$(".form_user .btn-back").on("click",function(){$(".first_tab").toggle(),$(".second_tab").toggle(),$(".first_tab").is(":visible")&&($(".mark1").css("background","#1594F0"),$(".mark2").css("background","rgba(43, 43, 43, 0.2)")),$(".second_tab").is(":visible")&&($(".mark1").css("background","rgba(21, 148, 240, 0.4)"),$(".mark2").css("background","#1594F0"))});var month;locale=$(".locale").text();validate_text="hr"==locale?"Obavezno polje":(locale="en")?"Required field":"Obavezno polje",$(".form_doc .btn-submit").click(function(e){var t=$(this).parents("form:first");$(this).parents("form:first").attr("action");t.serialize();var a=!1;$("select").each(function(e){"required"==$(this).attr("required")&&(null==$(this).val()||""==$(this).val()||""==$(this).val()?($(this).parent().find(".modal_form_group_danger").length||$(this).parent().append('<p class="modal_form_group_danger">'+validate_text+"</p>"),a=!1):($(this).parent().find(".modal_form_group_danger").remove(),a=!0))}),$("input").each(function(e){"required"==$(this).attr("required")&&(0==$(this).val().length||""==$(this).val()?($(this).parent().find(".modal_form_group_danger").length||$(this).parent().append('<p class="modal_form_group_danger">'+validate_text+"</p>"),a=!1):($(this).parent().find(".modal_form_group_danger").remove(),a=!0))}),0==a&&e.preventDefault()});var table=$("table.display");$(".second_view_header .change_month").on("change",function(){null!=$(this).val()&&(date=$(this).val(),url=location.href+"?date="+date,console.log(url),$.ajax({url:url,type:"get",beforeSend:function(){$("body").prepend('<div id="loader"></div>')},success:function(e){$(".main_work_records").load(url+" .main_work_records .second_view",function(){$("#loader").remove(),$(".td_izostanak:not(:empty)").each(function(e){$(this).addClass("abs_"+$.trim($(this).text()))}),$.getScript("/../js/datatables.js"),$(".show_button").on("click",function(){$(".dt-buttons").toggle()}),$(".change_month").find('option[value="'+date+'"]').attr("selected",!0)})},error:function(e,t,a){var n={exception:e.responseJSON.exception,message:e.responseJSON.message,file:e.responseJSON.file,line:e.responseJSON.line};$.ajax({url:"errorMessage",type:"get",data:n,success:function(e){$('<div><div class="modal-header"><span class="img-error"></span></div><div class="modal-body"><div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>danger:</strong>'+e+"</div></div></div>").appendTo("body").modal()},error:function(e,t,a){console.log(e.responseJSON)}})}}))}),$(function(){$(".td_izostanak:not(:empty)").each(function(e){$(this).addClass("abs_"+$.trim($(this).text()))})});
